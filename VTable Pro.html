<!DOCTYPE html>
<html>
<head>
	<title>复杂表格</title>
	<!-- 表格样式 -->
	<link rel="stylesheet" type="text/css" href="src/VTable.css">
	
	<style type="text/css">
		#show-table {
			width: 1000px;
			height: 600px;
			margin: 0 auto;
			border: 1px solid #ddd;
		}
	</style>
</head>
<body>

	<!-- 表格内容 -->
	<div id="show-table">
		<!-- 使用 VTable 组件生成表格 -->
		<v-table 
			:header="tableHeader" 
			:left="tableLeft" 
			:data="tableData"
		></v-table>
	</div>

	<!-- 用于存放模板的区域 -->
	<div class="tem-mod"></div>
	
	<!-- jQ -->
	<script src="js/jquery-3.2.1.min.js"></script>
	<!-- Vue -->
	<script src="js/vue.min.js"></script>

	<!-- 表格组件功能 -->
	<script src="src/VTable.js"></script>

	<script>

		// 表格头
		var header = [
			{
				"text": "_aside_",
				"width": 400,
				"type": "leftAside"
			},
			{
				"text": "2017",
				"children": [
					{
						"text": "Q1",
						"children": [
							{
								"text": "1月",
								"width": 100
							},
							{
								"text": "2月",
								"width": 100
							},
							{
								"text": "3月",
								"width": 100
							}
						]
					},
					{
						"text": "Q2",
						"children": [
							{
								"text": "4月",
								"width": 100
							},
							{
								"text": "5月",
								"width": 100
							},
							{
								"text": "6月",
								"width": 100
							}
						]
					},
					{
						"text": "Q3",
						"children": [
							{
								"text": "7月",
								"width": 100
							},
							{
								"text": "8月",
								"width": 100
							},
							{
								"text": "9月",
								"width": 100
							}
						]
					},
					{
						"text": "Q4",
						"children": [
							{
								"text": "10月",
								"width": 100
							},
							{
								"text": "11月",
								"width": 100
							},
							{
								"text": "12月",
								"width": 100
							}
						]
					},
					{
						"text": "总结",
						"width": 100
					}
				]
			}
		];

		// 表格的侧边
		var leftAside = [
			{
				"text": "1A",
				"children": [
					{
						"text": "1A-1B",
						"children": [
							{
								"text": "1A-1C",
								"children": [
									{
										"text": "1A-1D"
									},
									{
										"text": "1A-2D"
									}
								]
							},
							{
								"text": "1A-2C"
							}
						]
					},
					{
						"text": "1A-2B",
						"children": [
							{
								"text": "nZBusCv",
								"children": [
									{
										"text": "hLBfeC"
									},
									{
										"text": "gCYaNz"
									}
								]
							},
							{
								"text": "WJf"
							}
						]
					},
					{
						"text": "1A-3B"
					},
					{
						"text": "1A-4B"
					},
					{
						"text": "1A-5B"
					},
					{
						"text": "1A-6B"
					}
				]
			},
			{
				"text": "2A",
				"children": [
					{
						"text": "bmrUOXMWj",
						"children": [
							{
								"text": "aSh",
								"children": [
									{
										"text": "UBjDvGqI"
									},
									{
										"text": "rEddXwlZO"
									}
								]
							},
							{
								"text": "GU"
							}
						]
					},
					{
						"text": "MipxprHWC",
						"children": [
							{
								"text": "vNt",
								"children": [
									{
										"text": "wGcaOkeVl"
									},
									{
										"text": "ogO"
									}
								]
							},
							{
								"text": "CiRguNc"
							}
						]
					},
					{
						"text": 10
					},
					{
						"text": 72
					},
					{
						"text": 69
					},
					{
						"text": 97
					}
				]
			},
			{
				"text": "3A",
				"children": [
					{
						"text": "BGBlfymE",
						"children": [
							{
								"text": "fWgPYk",
								"children": [
									{
										"text": "qV"
									},
									{
										"text": "AqnasSe"
									}
								]
							},
							{
								"text": "gStEYv"
							}
						]
					},
					{
						"text": "TfcMSrFr",
						"children": [
							{
								"text": "Wj",
								"children": [
									{
										"text": "f"
									},
									{
										"text": "Fhf"
									}
								]
							},
							{
								"text": "Ggkkk"
							}
						]
					},
					{
						"text": 13
					},
					{
						"text": 49
					},
					{
						"text": 13
					},
					{
						"text": 26
					}
				]
			},
			{
				"text": "4A",
				"children": [
					{
						"text": "svYGlis",
						"children": [
							{
								"text": "ovgSTgn",
								"children": [
									{
										"text": "qyWhc"
									},
									{
										"text": "ysBIp"
									}
								]
							},
							{
								"text": "GuYd"
							}
						]
					},
					{
						"text": "LWlQPHEuam",
						"children": [
							{
								"text": "vpf",
								"children": [
									{
										"text": "EhlYlzF"
									},
									{
										"text": "PIylkdRYV"
									}
								]
							},
							{
								"text": "YxOey"
							}
						]
					},
					{
						"text": 16
					},
					{
						"text": 87
					},
					{
						"text": 55
					},
					{
						"text": 11
					}
				]
			},
			{
				"text": "5A",
				"children": [
					{
						"text": "qtMRc",
						"children": [
							{
								"text": "SCkLxR",
								"children": [
									{
										"text": "QiEIig"
									},
									{
										"text": "bj"
									}
								]
							},
							{
								"text": "qnsolFL"
							}
						]
					},
					{
						"text": "pgUrRbIB",
						"children": [
							{
								"text": "cqG",
								"children": [
									{
										"text": "s"
									},
									{
										"text": "wmRAaltTGN"
									}
								]
							},
							{
								"text": "bZuLRQg"
							}
						]
					},
					{
						"text": 29
					},
					{
						"text": 60
					},
					{
						"text": 69
					},
					{
						"text": 22
					}
				]
			}
		];

		// 加载 VTable 表格
		$('.tem-mod').load('src/template.html', function() {

			// 完成后，我们开始生成表格内容
			var table = new Vue({
				el: '#show-table',
				data: {
					// 表格中间内容
					tableData: {},
					// 表格的头信息
					tableHeader: header,
					// 表格侧边
					tableLeft: {
						// 表格侧边数据 
						data: leftAside,
						// 表格侧边列宽
						width: [50, 100, 100, 150]
					}
				},
				mounted: function () {
					var _ = this;

					// 加载数据
					$.ajax({
						url: 'mock/hasLeft.json',
						type: 'get'
					})
					.done(function(data) {
						// 赋值给表格
						_.tableData = data

					})
					.fail(function(err) {
						// 请求数据错误时
						console.error(err)
					})

				}
			})
			
		})
	</script>

</body>
</html>